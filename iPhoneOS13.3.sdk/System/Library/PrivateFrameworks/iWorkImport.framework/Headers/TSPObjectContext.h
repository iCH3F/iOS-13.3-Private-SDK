//
//     Generated by class-dump 3.5 (64 bit) (Debug version compiled Mar 22 2020 01:47:48).
//
//  Copyright (C) 1997-2019 Steve Nygard.
//

#import <objc/NSObject.h>

#import <iWorkImport/TSPFileCoordinatorDelegate-Protocol.h>
#import <iWorkImport/TSPLazyReferenceDelegate-Protocol.h>
#import <iWorkImport/TSPObjectDelegate-Protocol.h>
#import <iWorkImport/TSPPassphraseConsumer-Protocol.h>
#import <iWorkImport/TSPSupportDirectoryDelegate-Protocol.h>

@class NSData, NSHashTable, NSMapTable, NSMutableArray, NSMutableSet, NSProgress, NSRecursiveLock, NSSet, NSString, NSURL, NSUUID, SFUCryptoKey, TSPCancellationState, TSPComponentManager, TSPDataDownloadManager, TSPDataManager, TSPDocumentMetadata, TSPDocumentProperties, TSPDocumentRevision, TSPDocumentSaveOperationState, TSPObject, TSPObjectContainer, TSPObjectUUIDMap, TSPPackage, TSPPackageWriteCoordinator, TSPRegistry, TSPResourceContext, TSPSupportManager, TSPSupportMetadata, TSUTemporaryDirectory;
@protocol NSFilePresenter, OS_dispatch_group, OS_dispatch_queue, TSPObjectContextDelegate;

__attribute__((visibility("hidden")))
@interface TSPObjectContext : NSObject <TSPFileCoordinatorDelegate, TSPLazyReferenceDelegate, TSPObjectDelegate, TSPSupportDirectoryDelegate, TSPPassphraseConsumer>
{
    _Atomic long long _lastObjectIdentifier;
    _Atomic long long _modifyObjectToken;
    _Atomic int _modifyObjectCount;
    _Atomic BOOL _didClose;
    unsigned int _mode;
    SFUCryptoKey *_decryptionKey;
    NSURL *_documentURL;
    TSPPackage *_documentPackage;
    TSPPackage *_supportPackage;
    NSURL *_supportURL;
    NSProgress *_readProgress;
    TSPCancellationState *_readCancellationState;
//     struct os_unfair_lock_s _documentPropertiesLock;
    TSPDocumentProperties *_documentProperties;
    NSMapTable *_objects;
    TSPObjectUUIDMap *_objectUUIDMap;
    NSMutableSet *_deterministicObjectUUIDSet;
    TSPDocumentRevision *_documentRevision;
    long long _preferredPackageType;
    NSSet *_featureIdentifiers;
    NSSet *_unsupportedFeatureIdentifiers;
    NSObject<OS_dispatch_queue> *_objectsQueue;
    NSObject<OS_dispatch_queue> *_writeQueue;
    NSRecursiveLock *_readLock;
    NSObject<OS_dispatch_queue> *_documentStateQueue;
    NSObject<OS_dispatch_queue> *_dataAttributesQueue;
    NSObject<OS_dispatch_queue> *_loadObserversQueue;
    NSObject<OS_dispatch_queue> *_runLoadObserversQueue;
    NSObject<OS_dispatch_queue> *_runLoadObserversForKnownObjectQueue;
    NSObject<OS_dispatch_queue> *_resourceAccessQueue;
    NSObject<OS_dispatch_queue> *_notificationQueue;
    NSProgress *_nextSaveProgress;
    TSPDocumentSaveOperationState *_saveOperationState;
    TSPPackageWriteCoordinator *_packageWriteCoordinator;
    NSHashTable *_objectsToIgnoreModifications;
    NSHashTable *_objectModifyDelegates;
    BOOL _isWaitingForEndSave;
    NSObject<OS_dispatch_group> *_pendingEndSaveGroup;
    NSObject<OS_dispatch_group> *_outstandingReadsGroup;
    NSObject<OS_dispatch_queue> *_temporaryDirectoryQueue;
    TSUTemporaryDirectory *_temporaryDirectory;
    struct unordered_map<const long long, NSMutableArray *, TSP::IdentifierHash, std::__1::equal_to<const long long>, std::__1::allocator<std::__1::pair<const long long, NSMutableArray *>>> _loadObservers;
    NSObject<OS_dispatch_queue> *_asynchronousObjectModifierQueue;
    NSHashTable *_asynchronousObjectModifiers;
    NSMutableArray *_suspendedAsynchronousObjectModifierStack;
    TSPObject *_supportObject;
    TSPPackageWriteCoordinator *_supportWriteCoordinator;
    NSHashTable *_objectProviders;
    NSObject<OS_dispatch_queue> *_objectProvidersQueue;
    struct {
        unsigned int delegateRespondsToAdditionalDocumentPropertiesForWrite:1;
        unsigned int delegateRespondsToAdditionalDocumentSupportPropertiesForWrite:1;
        unsigned int delegateRespondsToDocumentPasswordHintForWrite:1;
        unsigned int delegateRespondsToPackageDataForWrite:1;
        unsigned int delegateRespondsToAreNewExternalReferencesToDataAllowed:1;
        unsigned int delegateRespondsToAreExternalReferencesToDataAllowedAtURL:1;
        unsigned int delegateRespondsToBaseUUIDForObjectUUID:1;
        unsigned int delegateRespondsToPreserveDocumentRevisionIdentifierForSaveURL:1;
        unsigned int delegateRespondsToFilePresenter:1;
        unsigned int delegateRespondsToSupportDirectoryURLReturningIsUnique:1;
        unsigned int delegateRespondsToSupportDirectoryURL:1;
        unsigned int delegateRespondsToArchiveValidationMode:1;
        unsigned int delegateRespondsToIgnoreDocumentSupport:1;
        unsigned int delegateRespondsToIsDocumentSupportTemporary:1;
        unsigned int delegateRespondsToShouldLoadAllComponents:1;
        unsigned int delegateRespondsToIsInCollaborationMode:1;
        unsigned int delegateRespondsToIsInReadOnlyMode:1;
        unsigned int delegateRespondsToContextDidUpdateDocumentRevision:1;
        unsigned int skipDocumentUpgrade:1;
    } _flags;
    BOOL _nested;
    BOOL _losesDataOnWrite;
    NSString *_documentPasswordHint;
    TSPObject *_documentObject;
    id <TSPObjectContextDelegate> _delegate;
    TSPRegistry *_registry;
    TSPComponentManager *_componentManager;
    TSPResourceContext *_resourceContext;
    TSPDataManager *_dataManager;
    TSPDataDownloadManager *_dataDownloadManager;
    TSPSupportManager *_supportManager;
    TSPObjectContainer *_documentObjectContainer;
    TSPObjectContainer *_supportObjectContainer;
    TSPDocumentMetadata *_documentMetadata;
    TSPSupportMetadata *_supportMetadata;
    NSUInteger _saveToken;
    NSData *_passwordVerifier;
}

+ (void)waitForPendingEndSaveGroup:(id)arg1;
+ (BOOL)dumpMessagesForDocument:(id)arg1 decryptionKey:(id)arg2 toURL:(id)arg3;
+ (void)garbageCollectDocumentSupportWithKnownDocumentUUIDs:(id)arg1 delegate:(id)arg2;
+ (id)supportBundleURLForDocumentUUID:(id)arg1 delegate:(id)arg2;
+ (void)removeDefaultSupportDirectory;
+ (id)documentRevisionAtURL:(id)arg1 passphrase:(id)arg2 error:(id )arg3;
+ (BOOL)isTangierEditingFormatURL:(id)arg1;
+ (BOOL)isTangierEditingDirectoryFormatURL:(id)arg1;
+ (BOOL)isNativeDirectoryFormatURL:(id)arg1;
+ (BOOL)isNativeOrTangierEditingFormatURL:(id)arg1 hasNativeUTI:(BOOL)arg2 nestedDocumentFilename:(id)arg3;
+ (BOOL)isNativeOrTangierEditingFormatURL:(id)arg1 hasNativeUTI:(BOOL)arg2;
+ (BOOL)isNativeOrTangierEditingFormatURL:(id)arg1;
+ (id)releaseQueue;
@property(readonly, nonatomic) NSData *passwordVerifier; // @synthesize passwordVerifier=_passwordVerifier;
@property(readonly, nonatomic) NSUInteger saveToken; // @synthesize saveToken=_saveToken;
@property(readonly, nonatomic) TSPSupportMetadata *supportMetadata; // @synthesize supportMetadata=_supportMetadata;
@property(readonly, nonatomic) TSPDocumentMetadata *documentMetadata; // @synthesize documentMetadata=_documentMetadata;
@property(readonly, nonatomic) TSPObjectContainer *supportObjectContainer; // @synthesize supportObjectContainer=_supportObjectContainer;
@property(readonly, nonatomic) TSPObjectContainer *documentObjectContainer; // @synthesize documentObjectContainer=_documentObjectContainer;
@property(readonly, nonatomic) TSPSupportManager *supportManager; // @synthesize supportManager=_supportManager;
@property(readonly, nonatomic) TSPDataDownloadManager *dataDownloadManager; // @synthesize dataDownloadManager=_dataDownloadManager;
@property(readonly, nonatomic) TSPDataManager *dataManager; // @synthesize dataManager=_dataManager;
@property(readonly, nonatomic) TSPResourceContext *resourceContext; // @synthesize resourceContext=_resourceContext;
@property(readonly, nonatomic) TSPComponentManager *componentManager; // @synthesize componentManager=_componentManager;
@property(readonly, nonatomic) TSPRegistry *registry; // @synthesize registry=_registry;
@property(nonatomic) __weak id <TSPObjectContextDelegate> delegate; // @synthesize delegate=_delegate;
@property(readonly, nonatomic) TSPObject *documentObject; // @synthesize documentObject=_documentObject;
@property(readonly, nonatomic) NSString *documentPasswordHint; // @synthesize documentPasswordHint=_documentPasswordHint;
@property(readonly, nonatomic) BOOL losesDataOnWrite; // @synthesize losesDataOnWrite=_losesDataOnWrite;
@property(nonatomic) BOOL nested; // @synthesize nested=_nested;
- (id).cxx_construct;
// - (void).cxx_destruct;
- (void)addLoadObserver:(id)arg1 action:(SEL)arg2 forLazyReference:(id)arg3;
- (void)addLoadObserver:(id)arg1 action:(SEL)arg2 forObjectIdentifier:(long long)arg3 objectOrNil:(id)arg4;
- (id)addLoadedObjectsAndEnqueueNotifications:(id)arg1;
- (long long)updateModifyObjectToken;
- (id)objectWithUUID:(id)arg1 onlyIfLoaded:(BOOL)arg2 validateNewObjects:(BOOL)arg3 identifier:(long long )arg4;
- (BOOL)isObjectInDocument:(id)arg1;
- (id)objectUUIDMap;
- (BOOL)canSetObjectUUIDForObject:(id)arg1;
- (id)newObjectUUIDForObject:(id)arg1 baseOffset:(NSUInteger)arg2 ignoringBaseUUIDForObjectUUID:(BOOL)arg3;
- (long long)incrementLastObjectIdentifier:(long long)arg1;
@property(nonatomic) long long lastObjectIdentifier;
- (long long)newObjectIdentifier;
- (id)baseUUIDForObjectUUID;
@property(readonly, nonatomic) NSUUID *versionUUID;
- (BOOL)updateDocumentUUIDPreserveOriginalDocumentSupport:(BOOL)arg1 preserveShareUUID:(BOOL)arg2 error:(id )arg3;
@property(readonly, nonatomic) NSUUID *documentUUID;
@property(readonly, nonatomic) TSPPackage *supportPackage;
@property(readonly, nonatomic) TSPPackage *documentPackage;
- (void)didReadDocumentObject:(id)arg1;
- (BOOL)shouldLoadAllComponentsForDocumentURL:(id)arg1;
@property(readonly, nonatomic) BOOL ignoreDocumentResourcesWhileReading;
@property(readonly, nonatomic) BOOL ignoreVersionCheckingWhileReading;
@property(readonly, nonatomic) BOOL ignoreUnknownContentWhileReading;
@property(readonly, nonatomic) BOOL isDocumentSupportTemporary;
@property(readonly, nonatomic) BOOL ignoreDocumentSupport;
- (long long)archiveValidationMode;
- (void)enumerateObjectProvidersUsingBlock:(id /* CDUnknownBlockType */)arg1;
- (void)registerObjectProvider:(id)arg1;
- (id)supportDirectoryURLReturningIsBundleURL:(BOOL )arg1;
- (void)willModifyObject:(id)arg1 duringReadOperation:(BOOL)arg2;
- (BOOL)canModifyObject:(id)arg1;
- (void)endIgnoringModificationsForObject:(id)arg1;
- (void)beginIgnoringModificationsForObject:(id)arg1;
- (long long)modifyObjectTokenForNewObject;
@property(readonly, nonatomic) TSPObjectContext *context;
- (void)performReadUsingAccessorImpl:(id /* CDUnknownBlockType */)arg1;
- (void)performReadUsingAccessor:(id /* CDUnknownBlockType */)arg1;
@property(readonly, nonatomic) id <NSFilePresenter> filePresenter;
- (void)prepareForDocumentReplacementWithSuccess:(BOOL)arg1 forSafeSave:(BOOL)arg2;
- (void)prepareForDocumentReplacement;
- (void)waitForSaveToFinishIfNeeded;
- (id)initWithPartialDocumentURL:(id)arg1 delegate:(id)arg2 passphrase:(id)arg3 error:(id )arg4;
- (id)initForQuickLookWithURL:(id)arg1 registry:(id)arg2 delegate:(id)arg3 passphrase:(id)arg4 error:(id )arg5;
- (id)initForSpotlightWithURL:(id)arg1 delegate:(id)arg2 registry:(id)arg3 error:(id )arg4;
- (void)canPerformUserActionUsingBlock:(id /* CDUnknownBlockType */)arg1;
- (BOOL)canPerformUserActions;
@property(readonly, nonatomic) NSSet *unsupportedFeatureIdentifiers;
@property(readonly, nonatomic) NSSet *featureIdentifiers;
@property(readonly, nonatomic) BOOL hasCurrentFileFormatVersion;
- (void)registerAsynchronousObjectModifier:(id)arg1;
- (void)resumeAsynchronousModifications;
- (void)suspendAsynchronousModificationsForObjectTargetType:(NSUInteger)arg1;
- (void)removeObjectModifyDelegate:(id)arg1;
- (void)addObjectModifyDelegate:(id)arg1;
- (BOOL)containsDataConformingToUTI:(id)arg1;
@property(readonly, nonatomic) BOOL isInReadOnlyMode;
- (BOOL)isInCollaborationMode;
@property(readonly, nonatomic) SFUCryptoKey *decryptionKey;
@property(readonly, nonatomic) BOOL isPasswordProtected;
@property(readonly) long long aggregateReadabilityForDocumentResources;
- (void)enumerateDocumentResourcesUsingBlock:(id /* CDUnknownBlockType */)arg1;
- (id)documentResourceDataForDigestString:(id)arg1 locator:(id)arg2 filename:(id)arg3 canDownload:(BOOL)arg4;
- (void)updateAdditionalResourceRequests;
- (id)performResourceAccessUsingQueue:(id)arg1 block:(id /* CDUnknownBlockType */)arg2;
- (void)conditionallyBeginAccessingResourcesWithCompletionQueue:(id)arg1 completionHandler:(id /* CDUnknownBlockType */)arg2;
- (BOOL)areExternalReferencesToDataAllowedAtURL:(id)arg1;
@property(readonly, nonatomic) BOOL areNewExternalReferencesToDataAllowed;
- (BOOL)areExternalReferencesSupported;
- (BOOL)readObjectForIdentifier:(long long)arg1 isWeakReference:(BOOL)arg2 rootObjectComponent:(id)arg3 object:(id )arg4 error:(id )arg5;
- (id)readObjectIfNeededForIdentifier:(long long)arg1 isWeakReference:(BOOL)arg2 componentIdentifier:(long long)arg3;
- (BOOL)readLazyReference:(id)arg1 object:(id )arg2 error:(id )arg3;
- (BOOL)readComponent:(id)arg1 isWeakReference:(BOOL)arg2 rootObject:(id )arg3 allObjects:(id )arg4 error:(id )arg5;
- (BOOL)readComponent:(id)arg1 isWeakReference:(BOOL)arg2 documentPackage:(id)arg3 supportPackage:(id)arg4 rootObject:(id )arg5 allObjects:(id )arg6 error:(id )arg7;
- (void)resumeLoadingModifiedFlushedComponents;
- (void)suspendLoadingModifiedFlushedComponentsAndWait;
- (void)prepareToReadSupportObjectExternalDataReferencesAllowed:(BOOL)arg1 accessor:(id /* CDUnknownBlockType */)arg2;
@property(readonly, nonatomic) BOOL isSupportModified;
@property(readonly, nonatomic) BOOL isDocumentModified;
- (void)didReadSupportObject:(id)arg1;
- (void)setSupportObjectImpl:(id)arg1;
@property(retain, nonatomic) TSPObject *supportObject;
@property long long preferredPackageType;
- (void)resetDocumentRevision;
- (id)incrementDocumentRevisionWithIdentifier:(id)arg1;
@property(retain) TSPDocumentRevision *documentRevision;
- (void)didMoveSupportToURL:(id)arg1;
- (void)didMoveToURL:(id)arg1;
@property(readonly, nonatomic) NSURL *documentURL;
- (void)endIgnoringCachedObjectEviction;
- (void)beginIgnoringCachedObjectEviction;
- (id)dataWithContentsOfPackagePath:(id)arg1;
- (void)checkforDataWarningsWithPackageURL:(id)arg1;
- (id)temporaryDirectory;
- (void)performReadOperationOnKnownObjects:(id /* CDUnknownBlockType */)arg1;
- (id)objectForIdentifier:(long long)arg1;
- (BOOL)didFinishSuccessfullyReadingObjects:(id)arg1 readCoordinator:(id)arg2 finalizeHandlerQueue:(id)arg3;
- (void)presentPersistenceError:(id)arg1;
- (BOOL)readWithReadCoordinator:(id)arg1 finalizeHandlerQueue:(id)arg2 rootObject:(id )arg3 error:(id )arg4 readCompletion:(id /* CDUnknownBlockType */)arg5;
- (BOOL)continueReadingDocumentObjectFromDatabasePackageURL:(id)arg1 error:(id )arg2;
- (BOOL)readDocumentObjectFromDatabasePackageURL:(id)arg1 error:(id )arg2;
- (BOOL)continueReadingDocumentObjectFromPackageURL:(id)arg1 areExternalDataReferencesAllowed:(BOOL)arg2 error:(id )arg3;
- (BOOL)readDocumentObjectFromPackageURL:(id)arg1 error:(id )arg2;
@property(readonly, nonatomic) NSUInteger documentDataSize;
- (NSUInteger)sizeOfComponentsWithLocator:(id)arg1;
@property(readonly, nonatomic) NSUInteger documentObjectSize;
@property(readonly, nonatomic) NSUInteger documentSize;
- (NSUInteger)estimatedProgressTotalUnitCountForURL:(id)arg1 packageType:(long long)arg2;
- (BOOL)copyIfAppropriateFromOriginalURL:(id)arg1 toURL:(id)arg2 apfsMode:(BOOL)arg3 originalPackage:(id)arg4 packageType:(long long)arg5 inheritAttributes:(BOOL)arg6;
- (BOOL)shouldUseAPFSModeToWriteToURL:(id)arg1 originalURL:(id)arg2;
@property(readonly, nonatomic) long long packageType;
@property(readonly, nonatomic) TSPDocumentProperties *documentProperties;
@property(readonly, nonatomic) NSString *passphraseHint;
@property(readonly, nonatomic) NSData *keychainGenericItem;
@property(readonly, nonatomic) NSString *lastPasswordAttempted;
- (BOOL)setPassphrase:(id)arg1;
- (void)endAssertOnModify;
- (void)beginAssertOnModify;
- (void)replaceDocumentObject:(id)arg1;
- (void)requestAutosaveForExpensiveCalculation;
- (void)requestAutosave;
- (void)resumeSaveAndAutosaveWithReason:(id)arg1;
- (void)suspendSaveAndAutosaveWithReason:(id)arg1;
- (void)resumeAutosaveWithReason:(id)arg1;
- (void)suspendAutosaveWithReason:(id)arg1;
- (BOOL)saveToURL:(id)arg1 packageType:(long long)arg2 encryptionKey:(id)arg3 originalURL:(id)arg4 error:(id )arg5;
- (void)endSaveWithSuccess:(BOOL)arg1;
- (BOOL)endWriteWithSuccess:(BOOL)arg1 error:(id )arg2;
- (id)currentPackageDataWriter;
- (BOOL)writeToURL:(id)arg1 originalPackage:(id)arg2 supportURL:(id)arg3 originalSupportPackage:(id)arg4 encryptionKey:(id)arg5 error:(id )arg6;
- (BOOL)writeToURL:(id)arg1 encryptionKey:(id)arg2 error:(id )arg3;
- (void)beginWriteWithOriginalURL:(id)arg1 relativeURLForExternalData:(id)arg2;
- (void)beginWriteWithOriginalURL:(id)arg1;
- (void)beginSaveToURL:(id)arg1 updateType:(long long)arg2 packageType:(long long)arg3 documentUUID:(id)arg4;
- (void)beginSaveToURL:(id)arg1 updateType:(long long)arg2 packageType:(long long)arg3;
- (id)prepareSaveProgress;
- (void)performAsynchronousWriteOperationOnDataAttributes:(id /* CDUnknownBlockType */)arg1;
- (void)performReadOperationOnDataAttributes:(id /* CDUnknownBlockType */)arg1;
- (void)performAsynchronousWriteOperationOnDocumentState:(id /* CDUnknownBlockType */)arg1;
- (void)performReadOperationOnDocumentState:(id /* CDUnknownBlockType */)arg1;
- (void)performReadOperation:(id /* CDUnknownBlockType */)arg1;
- (void)endWriteOperation;
- (void)beginWriteOperation;
- (void)closeFromDealloc:(BOOL)arg1;
@property(readonly) BOOL closed;
- (void)close;
- (void)dealloc;
- (void)createInternalMetadataIfNeeded;
@property(readonly, nonatomic) BOOL isReadCancelled;
- (id)initWithURL:(id)arg1 delegate:(id)arg2 registry:(id)arg3 resourceContext:(id)arg4 mode:(unsigned int)arg5 passphrase:(id)arg6 skipDocumentUpgrade:(BOOL)arg7 error:(id )arg8;
- (id)initWithURL:(id)arg1 delegate:(id)arg2 resourceContext:(id)arg3 mode:(unsigned int)arg4 passphrase:(id)arg5 skipDocumentUpgrade:(BOOL)arg6 error:(id )arg7;
- (id)initWithURL:(id)arg1 delegate:(id)arg2 resourceContext:(id)arg3 passphrase:(id)arg4 skipDocumentUpgrade:(BOOL)arg5 error:(id )arg6;
- (id)initWithURL:(id)arg1 delegate:(id)arg2 passphrase:(id)arg3 error:(id )arg4;
- (id)initWithURL:(id)arg1 delegate:(id)arg2 error:(id )arg3;
- (id)initWithDelegate:(id)arg1 registry:(id)arg2 resourceContext:(id)arg3;
- (id)initWithDelegate:(id)arg1;
- (id)init;
- (id)dataWithLegacyDataIdentifier:(long long)arg1;
- (id)dataWithDigest:(id)arg1 preferredFilename:(id)arg2 canDownload:(BOOL)arg3 isMissingFromServer:(BOOL)arg4 downloadPriority:(long long)arg5;
- (id)dataWithDigest:(id)arg1;
- (id)deterministicObjectUUIDRelativeToObject:(id)arg1 offset:(NSUInteger)arg2;
- (id)UUIDsFromObjects:(id)arg1;
- (id)objectsFromUUIDs:(id)arg1;
- (id)objectWithUUIDPath:(id)arg1;
- (id)objectWithUUIDIfAvailableAndLoaded:(id)arg1;
- (id)objectWithUUIDIfAvailable:(id)arg1;
- (id)objectWithUUID:(id)arg1;
- (id)objectLocale;
- (id)documentRoot;
- (void)proxyObjectMapping:(id)arg1 willProxyReferencedObject:(id)arg2;

@end

